language: go

sudo: required

dist: trusty

install:
  - curl -LO https://github.com/spf13/hugo/releases/download/v0.20/hugo_0.20-64bit.deb && sudo dpkg -i hugo_0.20-64bit.deb
  - sudo apt -qq update && sudo apt install -y --no-install-recommends python python-pip texlive-latex-base texlive-fonts-recommended texlive-fonts-extra texlive-latex-extra
  - sudo pip install Pygments

script:
  - cd cv && mkdir build && pdflatex -interaction=nonstopmode -halt-on-error -output-directory build CV.tex && cd ..
  - mkdir -p static/files && mv cv/build/CV.pdf static/files
  - hugo version && hugo -v

after_success:
  - curl -LO https://github.com/netlify/netlifyctl/releases/download/v0.1.1/netlifyctl-linux-amd64-v0.1.1.tar.gz
  - tar -xzvf netlifyctl-linux-amd64-v0.1.1.tar.gz
  - ./netlifyctl version
  - ./netlifyctl deploy -A $NETLIFY_ACCESS_TOKEN
